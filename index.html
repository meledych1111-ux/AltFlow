<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtFlow - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app" class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <h1 class="logo">ArtFlow</h1>
                <span class="version">v1.0</span>
            </div>
            <nav class="header-nav">
                <button class="nav-btn" data-action="new">–ù–æ–≤—ã–π</button>
                <button class="nav-btn" data-action="open">–û—Ç–∫—Ä—ã—Ç—å</button>
                <button class="nav-btn" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="nav-btn" data-action="export">–≠–∫—Å–ø–æ—Ä—Ç</button>
            </nav>
        </header>

        <!-- Main Container -->
        <main class="main-container">
            <!-- Toolbar -->
            <aside class="toolbar">
                <div class="tool-section">
                    <h3 class="section-title">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
                    <div class="tool-grid">
                        <button class="tool-btn active" data-tool="brush" title="–ö–∏—Å—Ç—å (B)">
                            <span class="tool-icon">üñåÔ∏è</span>
                        </button>
                        <button class="tool-btn" data-tool="eraser" title="–õ–∞—Å—Ç–∏–∫ (E)">
                            <span class="tool-icon">üßΩ</span>
                        </button>
                        <button class="tool-btn" data-tool="shape" title="–§–∏–≥—É—Ä—ã (S)">
                            <span class="tool-icon">‚¨ú</span>
                        </button>
                        <button class="tool-btn" data-tool="text" title="–¢–µ–∫—Å—Ç (T)">
                            <span class="tool-icon">üìù</span>
                        </button>
                        <button class="tool-btn" data-tool="eyedropper" title="–ü–∏–ø–µ—Ç–∫–∞ (I)">
                            <span class="tool-icon">üíß</span>
                        </button>
                        <button class="tool-btn" data-tool="fill" title="–ó–∞–ª–∏–≤–∫–∞ (G)">
                            <span class="tool-icon">ü™£</span>
                        </button>
                    </div>
                </div>

                <div class="tool-section">
                    <h3 class="section-title">–ö–∏—Å—Ç–∏</h3>
                    <div class="brush-list" id="brushList">
                        <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <div class="tool-section">
                    <h3 class="section-title">–¶–≤–µ—Ç</h3>
                    <div class="color-controls">
                        <div class="color-picker-container">
                            <input type="color" id="primaryColor" value="#3498db" class="color-input">
                            <label for="primaryColor" class="color-label">–û—Å–Ω–æ–≤–Ω–æ–π</label>
                        </div>
                        <div class="color-picker-container">
                            <input type="color" id="secondaryColor" value="#ffffff" class="color-input">
                            <label for="secondaryColor" class="color-label">–§–æ–Ω–æ–≤—ã–π</label>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Canvas Area -->
            <section class="canvas-area">
                <div class="canvas-container" id="canvasContainer">
                    <canvas id="mainCanvas" class="main-canvas"></canvas>
                    <div class="canvas-overlay">
                        <div class="zoom-controls">
                            <button class="zoom-btn" data-action="zoom-out">‚àí</button>
                            <span class="zoom-level" id="zoomLevel">100%</span>
                            <button class="zoom-btn" data-action="zoom-in">+</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Properties Panel -->
            <aside class="properties-panel">
                <div class="panel-section">
                    <h3 class="section-title">–°–≤–æ–π—Å—Ç–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</h3>
                    <div class="property-controls" id="toolProperties">
                        <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <div class="panel-section">
                    <h3 class="section-title">–°–ª–æ–∏</h3>
                    <div class="layer-controls">
                        <button class="layer-btn" data-action="add-layer">+</button>
                        <button class="layer-btn" data-action="delete-layer">‚àí</button>
                        <button class="layer-btn" data-action="duplicate-layer">‚éò</button>
                    </div>
                    <div class="layers-list" id="layersList">
                        <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <div class="panel-section">
                    <h3 class="section-title">–§–∏–ª—å—Ç—Ä—ã</h3>
                    <div class="filter-list">
                        <button class="filter-btn" data-filter="blur">–†–∞–∑–º—ã—Ç–∏–µ</button>
                        <button class="filter-btn" data-filter="sharpen">–†–µ–∑–∫–æ—Å—Ç—å</button>
                        <button class="filter-btn" data-filter="brightness">–Ø—Ä–∫–æ—Å—Ç—å</button>
                        <button class="filter-btn" data-filter="contrast">–ö–æ–Ω—Ç—Ä–∞—Å—Ç</button>
                        <button class="filter-btn" data-filter="hue">–û—Ç—Ç–µ–Ω–æ–∫</button>
                        <button class="filter-btn" data-filter="invert">–ò–Ω–≤–µ—Ä—Å–∏—è</button>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-info">
                <span class="canvas-info" id="canvasInfo">1920x1080 | 72 DPI</span>
                <span class="cursor-info" id="cursorInfo">X: 0, Y: 0</span>
            </div>
            <div class="status-actions">
                <button class="status-btn" data-action="grid">–°–µ—Ç–∫–∞</button>
                <button class="status-btn" data-action="guides">–ù–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ</button>
                <button class="status-btn" data-action="snap">–ü—Ä–∏–≤—è–∑–∫–∞</button>
            </div>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="modalContainer" class="modal-container hidden">
        <!-- –ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è GitHub Pages —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
        async function loadApp() {
            try {
                console.log('–ó–∞–≥—Ä—É–∑–∫–∞ ArtFlow...');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
                await loadScript('js/core/EventManager.js');
                await loadScript('js/core/BrushBase.js');
                await loadScript('js/core/ToolManager.js');
                await loadScript('js/core/LayerManager.js');
                await loadScript('js/core/FilterManager.js');
                await loadScript('js/core/CanvasManager.js');
                await loadScript('js/core/App.js');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª–∏ –∫–∏—Å—Ç–µ–π
                await loadScript('js/brushes/Sphere3DBrush.js');
                await loadScript('js/brushes/MetalBrush.js');
                await loadScript('js/brushes/GlassBrush.js');
                await loadScript('js/brushes/CeramicBrush.js');
                await loadScript('js/brushes/TextureBrush.js');
                await loadScript('js/brushes/GlowBrush.js');
                await loadScript('js/brushes/AnimeBrushes.js');
                await loadScript('js/brushes/DrawingBrushes.js');
                await loadScript('js/brushes/ArtistBrushes.js');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
                await loadScript('js/main.js');
                
                console.log('ArtFlow –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤:', error);
                showLoadError(error);
            }
        }

        function showLoadError(error) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'load-error';
            errorDiv.innerHTML = `
                <div class="error-content">
                    <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                    <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å ArtFlow.</p>
                    <p>–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: ${error.message}</p>
                    <button onclick="location.reload()">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
                </div>
            `;
            
            errorDiv.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
            `;
            
            errorDiv.querySelector('.error-content').style.cssText = `
                background: rgba(0, 0, 0, 0.8);
                padding: 20px;
                border-radius: 8px;
                max-width: 500px;
                text-align: center;
            `;
            
            document.body.appendChild(errorDiv);
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–≥–¥–∞ DOM –≥–æ—Ç–æ–≤
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadApp);
        } else {
            loadApp();
        }
    </script>
</body>
</html>